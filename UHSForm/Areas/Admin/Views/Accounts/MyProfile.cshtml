
@{
    ViewBag.Title = "My Profile";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage.cshtml";
}


<link href="~/Styles/bootstrap-fileinput.css" rel="stylesheet" />
<style>
    .shaaz {
        display: none;
    }

    .ngshaaz {
        display: block;
    }
</style>
<!--begin::Content-->
<div class="content d-flex flex-column flex-column-fluid" id="kt_content" ng-controller="MyProfileController">
    <!--begin::Post-->
    <div class="post d-flex flex-column-fluid" id="kt_post">
        <!--begin::Container-->
        <div id="kt_content_container" class="container-xxl">
            <!--begin::Navbar-->
            <div class="card mb-5 mb-xl-10">
                <div class="card-body pt-9 pb-0">
                    <!--begin::Details-->
                    <div class="d-flex flex-wrap flex-sm-nowrap">
                        <!--begin: Pic-->
                        <div class="me-7 mb-4">
                            <div style="cursor:pointer;" class="symbol symbol-100px symbol-lg-160px symbol-fixed position-relative" ng-click="ProfileModel('show')">
                                <img ng-src="{{profilePic}}" alt="image" id="mypprofile" style="display:none;" />
                                <div class="position-absolute translate-middle bottom-0 start-100 mb-6 bg-success rounded-circle border border-4 border-body h-20px w-20px"></div>
                            </div>
                        </div>
                        <!--end::Pic-->
                        <!--begin::Info-->
                        <div class="flex-grow-1">
                            <!--begin::Title-->
                            <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
                                <!--begin::User-->
                                <div class="d-flex flex-column">
                                    <!--begin::Name-->
                                    <div class="d-flex align-items-center mb-2">
                                        <a href="#" class="text-gray-900 text-hover-primary fs-2 fw-bold me-1" ng-bind="userDetails.Username"></a>
                                        <a href="#">
                                            <i class="ki-duotone ki-verify fs-1 text-primary">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                        </a>
                                    </div>
                                    <!--end::Name-->
                                    <!--begin::Info-->
                                    <div class="d-flex flex-wrap fw-semibold fs-6 mb-4 pe-2">
                                        <a href="#" class="d-flex align-items-center text-gray-500 text-hover-primary me-5 mb-2">
                                            <i class="ki-duotone ki-profile-circle fs-4 me-1">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                            </i>{{userDetails.Name}}
                                        </a>

                                        <a href="#" class="d-flex align-items-center text-gray-500 text-hover-primary mb-2">
                                            <i class="ki-duotone ki-sms fs-4">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>{{userDetails.Email}}
                                        </a>
                                    </div>
                                    <!--end::Info-->
                                </div>
                                <!--end::User-->

                            </div>
                            <!--end::Title-->

                        </div>
                        <!--end::Info-->
                    </div>
                    <!--end::Details-->
                    <!--begin::Navs-->
                    <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold">
                        <!--begin::Nav item-->
                        <li class="nav-item mt-2">
                            <a class="nav-link text-active-primary ms-0 me-10 py-5 active" data-bs-toggle="pill" href="#overview">Overview</a>
                        </li>
                        <!--end::Nav item-->
                        <!--begin::Nav item-->
                        <li class="nav-item mt-2">
                            <a class="nav-link text-active-primary ms-0 me-10 py-5" data-bs-toggle="pill" href="#changepassword">Change Password</a>
                        </li>
                        <!--end::Nav item-->

                    </ul>
                    <!--begin::Navs-->
                </div>
            </div>
            <!--end::Navbar-->
            <div class="tab-content">
                <div class="tab-pane fade show active" id="overview">
                    <!--begin::details View-->
                    <div class="card mb-5 mb-xl-10">
                        <!--begin::Card header-->
                        <div class="card-header cursor-pointer">
                            <!--begin::Card title-->
                            <div class="card-title m-0">
                                <h3 class="fw-bold m-0">Profile Details</h3>
                            </div>
                            <!--end::Card title-->
                            <!--begin::Action-->
                            <a href="#" class="btn btn-sm btn-primary align-self-center" data-bs-toggle="modal" data-bs-target="#ProfileDetails">Edit Profile</a>
                            <!--end::Action-->
                        </div>
                        <!--begin::Card header-->
                        <!--begin::Card body-->
                        <div class="card-body p-9">
                            <!--begin::Row-->
                            <div class="row mb-7">
                                <!--begin::Label-->
                                <label class="col-lg-4 fw-semibold text-muted">Full Name</label>
                                <!--end::Label-->
                                <!--begin::Col-->
                                <div class="col-lg-8">
                                    <span class="fw-bold fs-6 text-gray-800" ng-bind="userDetails.Name"></span>
                                </div>
                                <!--end::Col-->
                            </div>
                            <!--end::Row-->
                            <!--begin::Input group-->
                            <div class="row mb-7">
                                <!--begin::Label-->
                                <label class="col-lg-4 fw-semibold text-muted">Email</label>
                                <!--end::Label-->
                                <!--begin::Col-->
                                <div class="col-lg-8 fv-row">
                                    <span class="fw-semibold text-gray-800 fs-6" ng-bind="userDetails.Email"></span>
                                </div>
                                <!--end::Col-->
                            </div>
                            <!--end::Input group-->
                            <!--begin::Input group-->
                            <div class="row mb-7">
                                <!--begin::Label-->
                                <label class="col-lg-4 fw-semibold text-muted">
                                    Mobile Phone
                                    <span class="ms-1" data-bs-toggle="tooltip" title="Phone number must be active">
                                        <i class="ki-duotone ki-information fs-7">
                                            <span class="path1"></span>
                                            <span class="path2"></span>
                                            <span class="path3"></span>
                                        </i>
                                    </span>
                                </label>
                                <!--end::Label-->
                                <!--begin::Col-->
                                <div class="col-lg-8 d-flex align-items-center">
                                    <span class="fw-bold fs-6 text-gray-800 me-2" ng-bind="userDetails.MobileNo"></span>

                                </div>
                                <!--end::Col-->
                            </div>
                            <!--end::Input group-->


                        </div>
                        <!--end::Card body-->
                    </div>
                    <!--end::details View-->
                </div>

                <div class="tab-pane fade" id="changepassword">
                    <div class="card">
                        <div class="card-body">

                            <form class="form-horizontal" name="myChangePassword" novalidate>
                                <div class="row mb-3">
                                    <div class="col-md-5">

                                        <label class="form-label Is-required">Old Password </label>
                                        <input type="password" class="form-control" name="OldPassword" id="oldPassword" required ng-model="OldPassword">
                                        <span ng-if="myChangePassword.$submitted && myChangePassword.OldPassword.$invalid" ng-hide="validation" style="color:red" ng-bind="msgVOldPassword"></span>

                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <label for="example-email" class="form-label Is-required">New Password</label>
                                        <input type="password" class="form-control" name="NewPassword" id="newPassword" required ng-model="NewPassword" ng-pattern="Pa">
                                        <span ng-if="myChangePassword.$submitted && myChangePassword.NewPassword.$error.required" ng-hide="validation" style="color:red" ng-bind="msgVNewPassword"></span>

                                        <span ng-if="myChangePassword.$submitted && myChangePassword.NewPassword.$error.pattern" style="color:red" ng-bind="msgVNewPasswordError"></span>
                                        <span style="color:red" ng-bind="msgVNewPasswordUError" ng-hide="DisplayNewPasswordUError"></span>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <label for="example-password" class="form-label Is-required">Confirm Password</label>
                                        <input type="password" class="form-control" id="cpassword" name="ConfirmPassword" required ng-model="ConfirmPassword" ng-pattern="NewPassword">
                                        @*<span toggle="#cpassword" class="fa fa-fw fa-eye field-icon toggle-password"></span>*@
                                        <span ng-if="myChangePassword.$submitted && myChangePassword.ConfirmPassword.$error.required" ng-hide="validation" style="color:red" ng-bind="msgVConfirmPassword"></span>
                                        <span ng-if="myChangePassword.$submitted && myChangePassword.ConfirmPassword.$error.pattern" style="color:red" ng-bind="msgVConfirmPasswordError"></span>
                                    </div>
                                </div>
                                <button type="submit" ng-click="UpdatePassword(myChangePassword.$valid)" class="btn btn-primary">
                                    <span class="indicator-label" id="btnCsave">Change Password</span>
                                    <span class="indicator-progress" id="btnCloader">
                                        Please wait...
                                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                    </span>
                                </button>

                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!--end::Container-->
    </div>
    <!--end::Post-->

    <div class="modal fade" id="ProfileDetails" tabindex="-1" aria-hidden="true">
        <!--begin::Modal dialog-->
        <div class="modal-dialog modal-dialog-centered mw-650px">
            <!--begin::Modal content-->
            <div class="modal-content">
                <!--begin::Form-->
                <form class="form" name="myEditUserForm" novalidate>
                    <!--begin::Modal header-->
                    <div class="modal-header" id="kt_modal_add_customer_header">
                        <!--begin::Modal title-->
                        <h2 class="fw-bold">Update Profile Details</h2>
                        <!--end::Modal title-->
                        <!--begin::Close-->
                        <div data-bs-dismiss="modal" class="btn btn-icon btn-sm btn-active-icon-primary">
                            <i class="ki-outline ki-cross fs-1"></i>
                        </div>
                        <!--end::Close-->
                    </div>
                    <!--end::Modal header-->
                    <!--begin::Modal body-->
                    <div class="modal-body py-10 px-lg-17">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="last" class="control-label Is-required"><b>Full Name :</b></label>
                                <input type="text" class="form-control input-circle" id="txtEditName" name="FullName" maxlength="70" ng-model="userDetails.Name" required>
                                <span ng-if="myEditUserForm.$submitted && myEditUserForm.FullName.$invalid" style="color:red" ng-bind="msgVName"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="control-label Is-required"><b>Mobile No :</b></label>
                                <input type="text" class="form-control input-circle" id="txtEditMobileNo" name="MobileNo" ng-minlength="8" ng-maxlength="8" onkeyup="if (/\D/g.test(this.value)) this.value = this.value.replace(/\D/g,'')" minlength="8" maxlength="8" required ng-model="userDetails.MobileNo" />
                                <span ng-if="myEditUserForm.$submitted && myEditUserForm.MobileNo.$error.minlength"
                                      style="color:red" ng-bind="msgMinLength || 'Mobile no must be at least 8 digits long.'">

                                </span><br />
                                <span ng-if="myEditUserForm.$submitted && myEditUserForm.MobileNo.$invalid" style="color:red" ng-bind="msgVMobile"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="control-label Is-required"><b>Email :</b></label>
                                <input type="email" class="form-control input-circle" id="txtEditEmail" name="Email" maxlength="90" required ng-model="userDetails.Email" />
                                <span ng-if="myEditUserForm.$submitted && myEditUserForm.Email.$invalid" style="color:red" ng-bind="msgVEmail"></span>

                            </div>

                        </div>
                    </div>
                    <!--end::Modal body-->
                    <!--begin::Modal footer-->
                    <div class="modal-footer flex-center">
                        <!--begin::Button-->
                        <button type="reset" data-bs-dismiss="modal" class="btn btn-light me-3">Discard</button>
                        <!--end::Button-->
                        <!--begin::Button-->
                        <button type="submit" id="kt_modal_add_customer_submit" ng-click="UpdateUser(myEditUserForm.$valid,userDetails)" class="btn btn-primary">
                            <span class="indicator-label" id="btnsave">Submit</span>
                            <span class="indicator-progress" id="btnloader">
                                Please wait...
                                <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                            </span>
                        </button>
                        <!--end::Button-->
                    </div>
                    <!--end::Modal footer-->
                </form>
                <!--end::Form-->
            </div>
        </div>
    </div>

    <div class="shaaz" ng-class="{ngshaaz:show}" style="z-index: 999;">
        <div class="overlay" style="width: 100%;height: 100%;background: rgba(222,214,214,0.66);top: 0;left: 0;"></div>
        <div class="img-show" style="width: 400px; height: 350px; background: #F8F8FF; box-shadow: 0 0 10px 0 rgba(183, 192, 206, 0.9); position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); overflow: hidden; z-index: 2; ">
            <span class="canceled" style="position: absolute;top: 10px;right: 10px;z-index: 99;cursor: pointer;" ng-click="ProfileModel('cancel')">&times;</span><br><br>

            <form action="#" role="form" class="ng-pristine ng-valid">
                <div class="form-group text-center">
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                        <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
                            <img alt="ProfilePic" class="rounded-circle" ng-src="{{profilePic}}">
                        </div>
                        <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"> </div>
                        <div style="margin-left:20px;">
                            <span class="btn default btn-file">
                                <span class="fileinput-new"> Select image </span>
                                <span class="fileinput-exists"> Change </span>
                                <input type="file" accept=".png,.jpg,.jpeg,.gif" ngf-select="UploadFile($files)" name="images">
                            </span><span style="color:red;" ng-bind="spanProfPicV" class="ng-binding"></span>
                            <a href="" class="btn default fileinput-exists" data-dismiss="fileinput"> Remove </a>
                        </div>
                    </div>
                </div>
                <div class="margin-top-10 text-center" style="margin-left:20px;">
                    <button id="btnPicLoader" class="btn btn-primary ml-2" style="display:none;"><i class="ik ik-loader"></i>Loading</button>
                    <a href="" id="btnPicSubmit" class="btn btn-primary ml-2" ng-click="SaveProfilePic()"> Submit </a>
                    <a href="" class="btn btn-light default canceled" ng-click="ProfileModel('cancel')"> Cancel </a>
                </div>
            </form>
        </div>

    </div>

</div>
<!--end::Content-->